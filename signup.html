<html lang="en">
<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
	<link rel="stylesheet" href="assets/css/home.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Bitter:400,700">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
	<link rel="stylesheet" href ="assets/css/Carousel-Hero.css"
	>
	<link rel="stylesheet" href=  "assets/css/Contact-Form-Clean.css">
	<link rel="stylesheet" href=  "assets/css/Features-Clean.css">
	<link rel="stylesheet" href=  "assets/css/Footer-Dark.css">
	<link rel="stylesheet" href=  "assets/css/Header-Blue.css">
	<link rel="stylesheet" href=  "assets/css/Header-Dark.css">
	<link rel="stylesheet" href=  "assets/css/Highlight-Blue.css">
	<link rel="stylesheet" href=  "assets/css/Post-Card.css">
	<link rel="stylesheet" href=  "assets/css/project-card.css">
	<link rel="stylesheet" href=  "assets/css/Sidebar-Menu-1.css">
	<link rel="stylesheet" href=  "assets/css/Sidebar-Menu.css">
	<link rel="stylesheet" href=  "assets/css/styles.css">
	<link rel="stylesheet" href=  "assets/css/Carousel-Hero.css">
	<link rel="stylesheet" href=  "assets/css/Responsive-Form-1.css">
	<link rel="stylesheet" href=  "assets/css/Responsive-Form.css">
	<link rel="stylesheet" href=  "assets/css/signup.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	
    <script src="/script/aws-cognito-sdk.min.js"></script>
	<script src="/script/amazon-cognito-identity.min.js"></script>
	<script src="https://sdk.amazonaws.com/js/aws-sdk-2.797.0.min.js"></script>


	<title>The IntReview</title>

</head>
<body>
	<style>
		.loader {
			border: 16px solid #f3f3f3; /* Light grey */
			border-top: 16px solid #3498db; /* Blue */
			border-radius: 50%;
			width: 20px;
			height: 20px;
			animation: spin 2s linear infinite;
		}
	
		@keyframes spin {
			0% { transform: rotate(0deg); }
			100% { transform: rotate(360deg); }
		}
		</style>
		
    


	<div class="row" style="position: absolute;width: 100%;top: 115px;left: 16px;">
		<div class="col-xl-6"><img src="assets/img/undraw_Login_re_4vu2.svg" style="width: 700px;height: 700px;"></div><div class="col-xl-6">
			<div class="row" style="">
				<div class="col">
					<div class="container offset-lg-5" s>
						<h1 class="display-5 text-info" style="margin-left: 45px;">Sign Up</h1>
					</div>
				</div>
			</div>
			<div class="container">
				<div>




					<form>

						<div class="form-group">
							<div id="formdiv" style="width: 87%;">





								<div class="form-row" style="margin-right:0px;margin-left:0px;padding-top:24px;padding-bottom:100px;">
									<div class="row offset-md-5">
										<div class="small-12 medium-2 large-2 columns">
											<div class="circle">
												<!-- User Profile Image -->
												<img class="profile-pic" src="https://cdn3.iconfinder.com/data/icons/mixed-communication-and-ui-pack-1/48/general_pack_NEW_glyph_profile-512.png">

												<!-- Default Image -->
												<!-- <i class="fa fa-user fa-5x"></i> -->
											</div>
											<div class="p-image">
												<i class="fa fa-camera upload-button"></i>
												<input class="file-upload" id="profilepic" name="profile_pic" type="file" accept="image/*"/>
											</div>
										</div>
									</div>

								</div>


								<div class="form-row" style="margin-right:0px;margin-left:0px;padding-top:24px;">

							<!-- <div class="col-md-8 offset-md-1">
								<p style="margin-left:2%;font-family:Roboto, sans-serif;font-size:24px;"><strong>Name </strong></p>
							</div> -->

							<div class="col-md-10 offset-md-1 input-icons">

								<i class="fa fa-user icon" aria-hidden="true"></i>
								<input type="text" id="username" class="form-control input-field" style="margin-left:0px;font-family:Roboto, sans-serif;" name="name" placeholder="Name" /> 								

							</div>
						</div>





						<div class="form-row" style="margin-right:0px;margin-left:0px;padding-top:24px;">


							<div class="col-md-10 offset-md-1 input-icons">

								<i class="fa fa-envelope icon" aria-hidden="true"></i>
								<input type="email" id="email" class="form-control input-field" style="margin-left:0px;font-family:Roboto, sans-serif;" name="email" placeholder="Email" /> 								

							</div>
						</div>


						



						<div class="form-row" style="margin-right:0px;margin-left:0px;padding-top:24px;">


							
							<div class="col-md-10 offset-md-1 input-icons">

								<i class="fa fa-lock icon" aria-hidden="true"></i>
								<input type="password" id="password" class="form-control input-field" style="margin-left:0px;font-family:Roboto, sans-serif;" name="password" placeholder="Password" /></div>
							</div>


							<div class="form-row" style="margin-right:0px;margin-left:0px;padding-top:24px;">


								<div class="col-md-10 offset-md-1 input-icons">
	
									<i class="fa fa-phone icon" aria-hidden="true"></i>
									<input type="password" id="confirmpassword" class="form-control input-field" style="margin-left:0px;font-family:Roboto, sans-serif;" name="confirmpassword" placeholder="Confirm password" /> 								
	
								</div>
							</div>


							<div class="form-row" style="margin-right:0px;margin-left:0px;padding-top:24px;">


								<div class="col-md-10 offset-md-1 input-icons">
	
									<i class="fa fa-phone icon" aria-hidden="true"></i>
									<input type="text" id="verification" class="form-control input-field" style="margin-left:0px;font-family:Roboto, sans-serif;display:none;"  name="verification" placeholder="Enter verification code" /> 								
	
								</div>
							</div>




							<div class="form-row" style="margin-right:0px;margin-left:0px;padding-top:24px;">
								<div class="offset-md-5">

									<button class="btn btn-info btn-lg" style="margin-left:16px;" id="registerbutton" type="button" onclick="register()">Register </button></div>
								</div>

							</div>

							<div class="form-row" style="margin-right:0px;margin-left:0px;padding-top:24px;" >
								<div class="offset-md-5">

									<button class="btn btn-info btn-lg" style="margin-left:16px;" style="display:none" id="verify" type="submit" onclick="verifyCode()" >Verify </button></div>
								</div>

							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>

		<!-- LOGIC FOR UPLOADING PICRTURE<-->
		<script>
			$(document).ready(function() {


				var readURL = function(input) {
					if (input.files && input.files[0]) {
						var reader = new FileReader();

						reader.onload = function (e) {
							$('.profile-pic').attr('src', e.target.result);
						}

						reader.readAsDataURL(input.files[0]);
					}
				}


				$(".file-upload").on('change', function(){
					readURL(this);
				});

				$(".upload-button").on('click', function() {
					$(".file-upload").click();
				});
			});
		</script>




		


		<!-- Footer -->    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>

		<div class="footer-dark" style="position: absolute;width: 100%;top: 100%;">
			<footer>
				<div class="container">
					<div class="row">
						<div class="col-sm-6 col-md-3 item">
							<h3>Services</h3>
							<ul>
								<li><a href="#">Web design</a></li>
								<li><a href="#">Development</a></li>
								<li><a href="#">Hosting</a></li>
							</ul>
						</div>
						<div class="col-sm-6 col-md-3 item">
							<h3>About</h3>
							<ul>
								<li><a href="#">Company</a></li>
								<li><a href="#">Team</a></li>
								<li><a href="#">Careers</a></li>
							</ul>
						</div>
						<div class="col-md-6 item text">
							<h3>Company Name</h3>
							<p>Praesent sed lobortis mi. Suspendisse vel placerat ligula. Vivamus ac sem lacus. Ut vehicula rhoncus elementum. Etiam quis tristique lectus. Aliquam in arcu eget velit pulvinar dictum vel in justo.</p>
						</div>
						<div class="col item social"><a href="#"><i class="icon ion-social-facebook"></i></a><a href="#"><i class="icon ion-social-twitter"></i></a><a href="#"><i class="icon ion-social-snapchat"></i></a><a href="#"><i class="icon ion-social-instagram"></i></a></div>
					</div>
					<p class="copyright">Company Name Â© 2017</p>
				</div>
			</footer>
		</div>
	</div>




	<!-- Top Navigation bar-->
	<div class="row">
		<div class="col" style="position: relative;">
			<nav class="navbar navbar-dark navbar-expand-md text-left" style="background: #009877;position: fixed;width: 100%;top: 0;font-size: 22px;">
				<div class="container-fluid"><button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1"><span class="sr-only">Toggle navigation</span><span class="navbar-toggler-icon"></span></button><img class="rounded-circle" src="assets/img/undraw_updated_resume_u4fy.svg" width="200"
					height="100">
					<div class="collapse navbar-collapse" id="navcol-1">
						<ul class="nav navbar-nav ml-auto">
							<li class="nav-item"><a class="nav-link" id="home" href="home.html" style="filter: blur(0px) grayscale(0%) hue-rotate(0deg) invert(0%) sepia(0%);text-shadow: 0px 0px;">Home</a></li>
							<li class="nav-item"><a class="nav-link" id="signup" href="signup.html" style="text-shadow: 0px 0px;">Signup</a></li>
							<li class="nav-item"><a class="nav-link" id="signin" href="signin.html"  style="text-shadow: 0px 0px;">Login</a></li>
						</ul>
					</div>
				</div>
			</nav>
		</div>

	</div>











	<!-- Optional JavaScript; choose one of the two! -->

	<!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
	<script src="{% static 'assets/js/Sidebar-Menu.js' %}"></script>
<!-- Option 2: jQuery, Popper.js, and Bootstrap JS
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>

-->




<script>
	var userPoolId = 'ap-south-1_B5GoOK7Hk';
	var clientId = '5skb7pi11qp9ib9qapg88v9og3';
	var region = 'ap-south-1';
	var identityPoolId = 'ap-south-1:ff28d098-4d7c-471f-a468-40b3145f92c6';


	// Amazon Cognito creates a session which includes the id, access, and refresh tokens of an authenticated user.



	
	var cognitoUser;
        var idToken;
        var userPool;
        
        var poolData = { 
            UserPoolId : 'ap-south-1_B5GoOK7Hk',
            ClientId : '5skb7pi11qp9ib9qapg88v9og3'
        };
		var userPool = new AWSCognito.CognitoIdentityServiceProvider.CognitoUserPool(poolData);
		var userData = {
    Username :$('#username').val(), // your username here
    Pool : userPool
};

		function switchToVerificationCodeView(){
            $("#email").hide();
            $("#username").hide();
            $("#password").hide();
            $("#confirmpassword").hide();     
            $("#registerbutton").hide();
            $("#verification").show();
            $("#verify").show();
            
        }

		function switchToRegisterView(){
            $("#email").show();
            $("#username").show();
            $("#password").show();
            $("#confirmpassword").show();
            
            $("#registerbutton").show();
            $("#verification").hide();
            $("#verify").hide();
           
        }

		function register(){
			//switchToRegisterView();

            if( !$('#email').val() || !$('#username').val()  || !$('#password').val() || !$('#confirmpassword').val() ) {
                    alert('Please fill all the fields!');
            }else{
                if($('#password').val() == $('#confirmpassword').val()){
                    registerUser($('#email').val(), $('#username').val(), $('#password').val());
                }else{
                    alert('Confirm password failed!');
                }
                
            }
		}

		 /*
        Starting point for user verification using AWS Cognito with input validation
        */
        function verifyCode(){
            if( !$('#verification').val() ) {
                alert('Please enter verification field!');
            }else{
                //$("#loader").show();
                cognitoUser.confirmRegistration($('#verification').val(), true, function(err, result) {
                    if (err) {
                        alert(err);
						return;
                    }
                        alert('Successfully verified code!');
						window.location.href="signin.html";
						//this.session.confirmed = true;
                        //switchToLogInView();
                    
                    
                   // $("#loader").hide();
                });
            }
        }


		/*
        User registration using AWS Cognito
        */
        function registerUser(emailid, uname, pass){
            var attributeList = [];
            
            var dataEmail = {
                Name : 'email',
                Value : emailid
            };

            var attributeEmail = new AmazonCognitoIdentity.CognitoUserAttribute(dataEmail);

            attributeList.push(attributeEmail);

            $("#loader").show();
            userPool.signUp(uname, pass, attributeList, null, function(err, result){
                if (err) {
                    alert(err);
					return;
                }else{
                    cognitoUser = result.user;
                    alert('Registration Successful!');
                    alert('Username is: ' + cognitoUser.getUsername());
					//window.location="signin.html";
                    switchToVerificationCodeView();
                }
                //$("#loader").hide();
            });
        }


		/*
        This method will get temporary credentials for AWS using the IdentityPoolId and the Id Token recieved from AWS Cognito authentication provider.
        */
        function getCognitoIdentityCredentials(){
            AWS.config.region = region;

            var loginMap = {};
            loginMap['cognito-idp.' + region + '.amazonaws.com/' + userPoolId] = idToken;

            AWS.config.credentials = new AWS.CognitoIdentityCredentials({
                IdentityPoolId: 'ap-south-1:ff28d098-4d7c-471f-a468-40b3145f92c6',
                Logins: loginMap
            });

            AWS.config.credentials.clearCachedId();

            AWS.config.credentials.get(function(err) {
                if (err){
                    alert(err.message);
                }
                else {
                    logMessage('AWS Access Key: '+ AWS.config.credentials.accessKeyId);
                    logMessage('AWS Secret Key: '+ AWS.config.credentials.secretAccessKey);
                    logMessage('AWS Session Token: '+ AWS.config.credentials.sessionToken);
                }

                $("#loader").hide();
            });
        }


</script>
</body>
</html>

